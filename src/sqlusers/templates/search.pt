<tal:domain i18n:domain="">
  <h1 i18n:translate="" tal:content="view.title" />
  <div id="search" tal:define="results list(view.results)">
    <p class="bigger fatter">
      <a href="" tal:attributes="href view.base + '/' + view.__name__"
	 >&rarr; Reset the search</a>
    </p>
    <form tal:attributes="action view.base + '/' + view.__name__;
			  method view.formMethod;
			  enctype view.enctype">

      <div class="row">
        <div id="results" class="col-md-8">
	  <div tal:condition="view.batcher and view.batcher.available"
	       tal:content="structure view.batcher.render()" />
	  
          <p class="form-status"
             tal:condition="view.status"
             tal:content="view.status">Status</p>
	  
          <div class="form-error"
	       tal:condition="view.errors">
            <ul tal:condition="view.formErrors"
                tal:repeat="error view.formErrors">
	      <li> <span tal:replace="error.title" /> </li>
            </ul>
          </div>
	  
          <div tal:condition="not results">
            <h1 i18n:translate="">No search results</h1>
          </div>
	  <ul>
            <li tal:repeat="result results">
	      <a href="" tal:attributes="href result['url']"
		 tal:content="result['title']" />
	    </li>
          </ul>
        </div>
	  
        <div id="fields" tal:condition="view.fieldWidgets" class="col-md-4">
	  <tal:field repeat="widget view.fieldWidgets">
	    <div class="error-field"
		 tal:define="error widget.error"
		 tal:omit-tag="not error">
	      <div tal:attributes="class widget.required and 'field required-field' or 'field'">
		<h4>
		  <label class="field-label" for="#"
			 tal:attributes="for widget.htmlId()"
			 tal:content="widget.title">
		    Label
		  </label>
		  <span i18n:translate=""
			class="required-label"
			tal:condition="widget.required">(required)</span>
		</h4>
		<p class="field-description"
		   tal:condition="widget.description"
		   tal:content="widget.description" />
		
		<p class="error-label"
		   tal:condition="error"
		   tal:content="error.title" />
		
		<tal:widget tal:content="structure widget.render()" />
	      </div>
	    </div>
	  </tal:field>
	  
	  <div tal:condition="view.batcher">
	    <label for="size" class="field-label" 
		   i18n:translate="">Results per page</label>
	    <select id="size" name="batch.size">
	      <option tal:attributes="selected view.batch_size == 2"
		      >2</option>
	      <option tal:attributes="selected view.batch_size == 10"
		      >10</option>
	      <option tal:attributes="selected view.batch_size == 25"
		      >25</option>
	      <option tal:attributes="selected view.batch_size == 50"
		      >50</option>
	      <option tal:attributes="selected view.batch_size == 100"
		      >100</option>
	    </select>
	  </div>
	  <div tal:condition="view.sorter_values">
	    <label for="sorter" class="field-label" 
		   i18n:translate="">Sort by</label>
	    <select id="sorter" name="sorter">
	      <option tal:repeat="sort view.sorter_values.items()"
		      tal:attributes="value sort[0];
				      selected view.sorter == sort[0];"
		      tal:content="sort[1]" />
	    </select>
	  </div>
	  <div class="actions"
	       tal:condition="view.actionWidgets">
	    <div class="action" tal:repeat="widget view.actionWidgets">
	      <tal:widget tal:content="structure widget.render()" />
	    </div>
	  </div>
        </div>
      </div>
    </form>
  </div>
</tal:domain>
